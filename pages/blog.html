<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.ico" />
    <title>博客 - HealthJian的博客</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/dark-mode.css">
    <link rel="stylesheet" href="../css/footer-enhanced.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- 添加Chewy字体用于英文标题 -->
    <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
    
    <!-- 添加ZCOOL KuaiLe中文字体用于中文标题 -->
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">

    <!-- Tailwind & lucide（用于 textblog 风格 UI） -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkBg: '#0d3b66',   /* 与导航深蓝接近 */
                        darkCard: '#114a80', /* 略亮的卡片底色 */
                        darkBorder: '#1f5f9c',
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="light-mode" data-blog-ui="textblog">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="../index.html" class="logo">
                <img src="../images/githubherofigureimage.png" alt="Logo">
                <span class="site-name" data-en="HealthJian Blog" data-zh="HealthJian">HealthJian</span>
            </a>
        </div>
        <div class="nav-right">
            <ul class="menu">
                <li><a href="../index.html" data-en="Home" data-zh="首页">首页</a></li>
                <li><a href="blog.html" data-en="Blog" data-zh="博客">博客</a></li>
                <li><a href="project/project.html" data-en="Projects" data-zh="项目">项目</a></li>
                <li><a href="https://github.com/CaiNiaojian" target="_blank" data-en="GitHub" data-zh="GitHub">GitHub</a></li>
                <li><a href="links.html" data-en="Links" data-zh="链接">链接</a></li>
                <li><a href="about.html" data-en="About" data-zh="关于">关于</a></li>
            </ul>
            <div class="social-icons">
                <a href="https://steamcommunity.com/id/yoursteamid" target="_blank" title="Steam"><i class="fab fa-steam"></i></a>
                <a href="mailto:gaojian1573@foxmail.com" title="Email"><i class="fas fa-envelope"></i></a>
            </div>
            <button id="theme-toggle" class="theme-toggle" title="切换主题">
                <i class="fas fa-moon"></i>
                <i class="fas fa-sun"></i>
            </button>
            <button id="lang-toggle" class="lang-toggle" title="切换语言">
                <span data-en="EN" data-zh="中">中</span>
            </button>
        </div>
    </nav>

    <main class="bg-[#f9f7f2] dark:bg-darkBg text-[#1a1a1a] dark:text-gray-200">
        <!-- Hero & 控件 -->
        <section class="pt-16 pb-10 px-6 md:px-12 lg:px-24">
            <div class="max-w-7xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b-4 border-black dark:border-white pb-6">
                    <div>
                        <div class="inline-block px-3 py-1 border border-black dark:border-white bg-yellow-400 text-black text-xs font-mono font-bold mb-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.25)]" data-en="Blog Archive" data-zh="文章总览">
                            文章总览
                        </div>
                        <h1 class="font-mono text-5xl md:text-6xl font-bold tracking-tighter dark:text-white" data-en="Articles Overview" data-zh="文章总览">文章总览</h1>
                        <p class="mt-2 text-gray-600 dark:text-gray-400 max-w-lg" data-en="Code, life, and those fleeting sparks of ideas." data-zh="代码、生活与那些转瞬即逝的灵感。">代码、生活与那些转瞬即逝的灵感。</p>
                    </div>
                    
                    <div class="flex flex-col items-end gap-4 w-full md:w-auto">
                        <!-- Search -->
                        <div class="relative w-full md:w-64 blog-search">
                            <input type="text" id="search-input" placeholder="搜索文章..." data-en-placeholder="Search articles..." data-zh-placeholder="搜索文章..." class="w-full px-4 py-2 pl-10 border border-black dark:border-white bg-white dark:bg-darkCard text-black dark:text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all shadow-[2px_2px_0px_0px_rgba(0,0,0,0.25)]">
                            <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"></i>
                            <button class="hidden"></button>
                        </div>

                        <div class="flex items-center justify-between w-full md:w-auto gap-4">
                            <!-- Filters -->
                            <div class="flex flex-wrap gap-2 filter-tags">
                                <button class="filter-btn active px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-black text-white dark:bg-white dark:text-black transition-all shadow-[2px_2px_0px_0px_rgba(0,0,0,0.25)]" data-category="all" data-en="All" data-zh="全部">全部</button>
                                <button class="filter-btn px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-white dark:bg-darkCard text-gray-700 dark:text-gray-200 transition-all hover:bg-blue-100 dark:hover:bg-blue-900/30" data-category="tech" data-en="Technology" data-zh="技术">技术</button>
                                <button class="filter-btn px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-white dark:bg-darkCard text-gray-700 dark:text-gray-200 transition-all hover:bg-yellow-100 dark:hover:bg-yellow-900/30" data-category="life" data-en="Life" data-zh="生活">生活</button>
                                <button class="filter-btn px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-white dark:bg-darkCard text-gray-700 dark:text-gray-200 transition-all hover:bg-purple-100 dark:hover:bg-purple-900/30" data-category="thoughts" data-en="Thoughts" data-zh="随想">随想</button>
                                <button class="filter-btn px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-white dark:bg-darkCard text-gray-700 dark:text-gray-200 transition-all hover:bg-pink-100 dark:hover:bg-pink-900/30" data-category="idea" data-en="Ideas" data-zh="思想">思想</button>
                                <button class="filter-btn px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-white dark:bg-darkCard text-gray-700 dark:text-gray-200 transition-all hover:bg-green-100 dark:hover:bg-green-900/30" data-category="excerpt" data-en="Excerpt" data-zh="摘抄">摘抄</button>
                                <button class="filter-btn px-4 py-2 font-mono font-bold text-xs border border-black dark:border-white bg-white dark:bg-darkCard text-gray-700 dark:text-gray-200 transition-all hover:bg-red-100 dark:hover:bg-red-900/30" data-category="paper" data-en="Paper" data-zh="论文">论文</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 文章卡片区 -->
        <section class="px-6 md:px-12 lg:px-24 pb-20">
            <div class="max-w-7xl mx-auto">
                <div id="blog-grid" class="blog-list grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 transition-all duration-300">
                    <!-- JS 渲染文章 -->
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer>
        <div class="footer-container">
            <!-- Logo部分 -->
            <div class="footer-logo-section">
                <a href="../index.html" class="footer-logo">
                    <img src="../images/githubherofigureimage.png" alt="HealthJian Logo">
                    <span class="footer-logo-text" data-en="HealthJian Blog" data-zh="HealthJian Blog">HealthJian Blog</span>
                </a>
                <div class="footer-copyright">
                    <p>&copy; 2025 CaiNiaojian & HealthJian</p>
                    <p data-en="All Rights Reserved" data-zh="保留所有权利">保留所有权利</p>
                </div>
            </div>
            
            <!-- 导航部分 -->
            <div class="footer-nav-section">
                <h3 data-en="Quick Links" data-zh="快速链接">快速链接</h3>
                <div class="footer-links-grid">
                    <a href="../index.html" data-en="Home" data-zh="首页">首页</a>
                    <a href="about.html" data-en="About" data-zh="关于">关于</a>
                    <a href="changelog.html" data-en="ChangeLog" data-zh="更新日志">更新日志</a>
                    <a href="../pages/blog/noval/novel.html" data-en="Novel" data-zh="小说">小说</a>
                    <a href="../test-blog-list.html" data-en="Test" data-zh="测试">测试</a>
                    <a href="../pages/project/404notfound.html" data-en="University" data-zh="学校">学校</a>
                </div>
            </div>
            
            <!-- 社交媒体部分 -->
            <div class="footer-social-section">
                <h3 data-en="Connect With Me" data-zh="联系我">联系我</h3>
                <div class="footer-contact-info">
                    <p data-en="Email: gaojian1573@foxmail.com" data-zh="邮箱：gaojian1573@foxmail.com">邮箱：<a href="mailto:gaojian1573@foxmail.com">gaojian1573@foxmail.com</a></p>
                    <p data-en="Location: China, Jiangsu" data-zh="地址：中国，江苏">地址：中国，江苏</p>
                </div>
                <div class="footer-social-icons">
                    <a href="https://github.com/CaiNiaojian" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
                    <a href="#" title="WeChat"><i class="fab fa-weixin"></i></a>
                    <a href="#" target="_blank" title="Twitter/X"><i class="fab fa-twitter"></i></a>
                    <a href="mailto:example@gmail.com" title="Gmail"><i class="far fa-envelope"></i></a>
                    <a href="https://steamcommunity.com/id/yoursteamid" target="_blank" title="Steam"><i class="fab fa-steam"></i></a>
                </div>
                
                <!-- 时钟部分移到这里 -->
                <div class="footer-clock-section">
                    <div class="footer-clock">00:00:00</div>
                    <div class="footer-date" data-en="2025-05-19 Week One" data-zh="2025年05月19日 星期一">2025年05月19日 星期一</div>
                </div>
            </div>
        </div>
        
        <!-- 页脚底部信息 -->
        <div class="footer-bottom">
            <p data-en="Designed with ❤️ by " data-zh="由 ">由 <a href="about.html">HealthJian</a> <span data-en="with " data-zh="用 ">用 </span>❤️ <span data-en="designed" data-zh="设计">设计</span></p>
        </div>
    </footer>

    <script>
        window.SKIP_BLOG_INIT = true; // 仅复用数据，跳过旧UI初始化
    </script>
    <script src="../js/blog.js"></script>
    <script src="../js/theme.js"></script>
    <script src="../js/language.js"></script>
    <script src="../js/footer.js"></script>
    <script>
        // 渲染 textblog 风格的文章卡片
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            // 数据源：优先使用 getBlogPosts（来自 js/blog.js），否则使用本地备份
            const fallbackArticles = [
                { title: '机器学习复习1', title_en: 'Machine Learning Review 1', date: '2025-12-29', category: 'tech', desc: '机器学习复习笔记1。', desc_en: 'Machine learning review notes1.', tags: ['机器学习','复习','笔记'], tags_en: ['Machine Learning','Review','Notes'], url: '/pages/blog/tech/20251229ML03.html' },
                { title: '关于网络左翼的批判', title_en: 'Criticism of Network Leftists', date: '2025-12-24', category: 'idea', desc: '批判网络左翼的兴起与基本特征。', desc_en: 'Criticism of the rise and basic characteristics of network leftists.', tags: ['网络左翼','批判','网络左翼'], tags_en: ['Network leftists','Criticism','Network leftists'], url: '/pages/blog/life/20251224.html' },
                { title: '我们的来时路与未来', title_en: 'Our Past and Future', date: '2025-12-22', category: 'idea', desc: '从历史、社会与家庭视角反思学习的目的与改造意义。', desc_en: 'Reflection on study and its meaning across education, society, and family.', tags: ['思想','历史','未来之路'], tags_en: ['Idea','History','Future Path'], url: '/pages/blog/life/20251222.html' },
                { title: '学习真的改造了吗？', title_en: 'Has study really changed us?', date: '2025-12-10', category: 'idea', desc: '从教育、社会与家庭视角反思学习的目的与改造意义。', desc_en: 'Reflection on study and its meaning across education, society, and family.', tags: ['想法','教育','反思'], tags_en: ['Idea','Education','Reflection'], url: '/pages/blog/life/ourstufyhasbeenchanged.html' },
                { title: '橡胶制品增塑剂迁移导致出油现象', title_en: 'Oil spillage from rubber product additive migration', date: '2025-10-06', category: 'tech', desc: '深入探讨橡胶制品中增塑剂迁移的机理及其导致的表面出油问题，并提出相应的解决方案。', desc_en: 'Additive migration in rubber products and mitigation ideas.', tags: ['橡胶制品','增塑剂','迁移','出油'], tags_en: ['Rubber product','Plasticizer','Migration','Oil spill'], url: '/pages/blog/tech/oil.html' },
                { title: '转折关头，你需要这些线索了解中国的未来五年', title_en: "At the turning point: signals for China's next five years", date: '2025-10-24', category: 'idea', desc: '围绕四中全会公报梳理未来五年的关键线索与思路。', desc_en: 'Key signals from the plenum for China’s next five years.', tags: ['思想','时政','趋势','中国'], tags_en: ['Ideas','Policy','Trends','China'], url: '/pages/blog/life/new-turning-point.html' },
                { title: '大数据作为智慧教育的催化剂：数据驱动方法、应用与挑战的综合述评', title_en: 'Big data as a catalyst for smart education', date: '2025-09-11', category: 'tech', desc: '综述大数据在智慧教育的应用现状与挑战。', desc_en: 'Review of big data in smart education.', tags: ['智慧教育','大数据','数据挖掘','数据分析'], tags_en: ['Smart education','Big data','Data mining','Analytics'], url: '/pages/blog/tech/smarteducation.html' },
                { title: '一种令人担忧的现象：大学校园正在成为烟民的温床', title_en: 'Campus is becoming a hotbed for smokers', date: '2025-09-09', category: 'life', desc: '观察并反思校园吸烟现象的蔓延与对策。', desc_en: 'Observation on smoking spread on campus.', tags: ['大学','烟民','温床','生活'], tags_en: ['University','Smoker','Hotbed','Life'], url: '/pages/blog/life/sharpcommentary.html' },
                { title: '坚持就是胜利', title_en: 'Persistence is Victory', date: '2025-09-08', category: 'life', desc: '结合考研经历，分享关于坚持与长期主义的感悟。', desc_en: 'Reflections on persistence and long-termism.', tags: ['考研','坚持','励志','生活'], tags_en: ['Grad exam','Persistence','Inspiration','Life'], url: '/pages/blog/life/Persistencisvictory.html' },
                { title: 'Markdown博客模板系统', title_en: 'Markdown blog template system', date: '2025-09-08', category: 'tech', desc: '全新的Markdown博客模板系统，支持完整渲染与高亮。', desc_en: 'A markdown blog template with full rendering.', tags: ['Markdown','博客模板','代码高亮'], tags_en: ['Markdown','Blog template','Code highlight'], url: '/pages/blog/tech/markdownblogs.html' },
                { title: '基于PaddlePaddle的卷积神经网络实现-十二猫分类', title_en: 'CNN with PaddlePaddle - 12 cats', date: '2025-05-30', category: 'tech', desc: '使用飞桨构建CNN，完成十二种猫咪的图像分类。', desc_en: 'Build CNN with PaddlePaddle for cat classification.', tags: ['PaddlePaddle','CNN','猫咪分类'], tags_en: ['PaddlePaddle','CNN','Cat classification'], url: '/pages/blog/tech/CNN-paddle.html' },
                { title: '学习进度与心态的反思', title_en: 'Study progress and mindset reflection', date: '2025-05-25', category: 'life', desc: '探讨学习进度与心态的关系。', desc_en: 'Reflections on study pace and mindset.', tags: ['学习','心态','反思','效率'], tags_en: ['Study','Mindset','Reflection','Efficiency'], url: '/pages/blog/life/studyrethink.html' },
                { title: '支持向量机（SVM）算法详解', title_en: 'Support Vector Machine explained', date: '2025-04-14', category: 'tech', desc: 'SVM 原理、应用与优化方法详解。', desc_en: 'SVM principles, use cases and optimizations.', tags: ['SVM','机器学习','分类','回归'], tags_en: ['SVM','Machine Learning','Classification','Regression'], url: '/pages/blog/tech/svm.html' },
                { title: '实验一：波士顿房价预测报告', title_en: 'Boston housing price prediction', date: '2025-04-12', category: 'tech', desc: '波士顿房价预测的完整实验记录。', desc_en: 'End-to-end Boston housing prediction experiment.', tags: ['机器学习','房价预测','特征选择'], tags_en: ['Machine Learning','Housing price','Feature selection'], url: '/pages/blog/tech/machinelearningBostonshouseprices.html' },
                { title: '人生无法通过考研上岸', title_en: 'Life cannot be landed by exams alone', date: '2025-04-09', category: 'life', desc: '关于考研与人生选择的随笔。', desc_en: 'An essay on grad exams and life choices.', tags: ['考研','随笔','人生','思考'], tags_en: ['Grad exam','Essay','Life','Thinking'], url: '/pages/blog/life/cannot-rely-on-exam.html' },
                { title: 'Mingw安装教程', title_en: 'Mingw installation tutorial', date: '2025-04-07', category: 'tech', desc: 'Windows 环境下 Mingw 的安装与配置。', desc_en: 'How to install and set up Mingw on Windows.', tags: ['Mingw','C/C++','编译器','Windows'], tags_en: ['Mingw','C/C++','Compiler','Windows'], url: '/pages/blog/tech/mingw-installation.html' },
                { title: '从零开始构建博客：技术栈、架构设计与实现', title_en: 'Build a blog from scratch', date: '2025-04-06', category: 'tech', desc: '博客的技术栈选型、架构设计与核心实现。', desc_en: 'Stack, architecture and implementation of this blog.', tags: ['博客','技术栈','架构设计','JavaScript'], tags_en: ['Blog','Tech stack','Architecture','JavaScript'], url: '/pages/blog/tech/blog-building.html' },
                { title: '2025年考研数学二大纲详解', title_en: 'Math II syllabus 2025', date: '2025-04-01', category: 'tech', desc: '系统梳理考研数学二大纲要点。', desc_en: 'Key points of the Math II syllabus.', tags: ['考研','数学','大纲'], tags_en: ['Grad exam','Math','Outline'], url: '/pages/blog/tech/outline-for-advanced-mathematicsⅡ.html' },
                { title: 'C语言入门：常用调用API在算法题中的应用', title_en: 'C API usage in algorithm problems', date: '2025-03-18', category: 'tech', desc: '巧用 C 标准库 API 化繁为简。', desc_en: 'Using C stdlib API to simplify algorithm coding.', tags: ['C语言','算法','API'], tags_en: ['C','Algorithm','API'], url: '/pages/blog/tech/c-api-algorithms.html' },
                { title: '数据结构：链表、栈、队列、串', title_en: 'Data structures recap', date: '2025-03-17', category: 'tech', desc: '基础数据结构的系统性总结与回顾。', desc_en: 'Systematic recap of core data structures.', tags: ['数据结构','链表','栈','队列'], tags_en: ['Data structures','List','Stack','Queue'], url: '/pages/blog/tech/data-structures.html' },
                { title: '我的第一篇博客：代码与心灵的共振', title_en: 'My first blog: resonance of code and soul', date: '2025-03-16', category: 'life', desc: '关于编程与生活平衡的第一篇记录。', desc_en: 'First note on balancing coding and life.', tags: ['博客','随想','生活'], tags_en: ['Blog','Thoughts','Life'], url: '/pages/blog/life/first-blog.html' }
            ];

            // 统一处理日期排序（倒序，最新在前）
            const parseDate = (d) => Date.parse(d) || 0;
            const articles = ((typeof getBlogPosts === 'function')
                ? getBlogPosts().map(post => ({
                    title: post.title,
                    title_en: post.title_en || post.title,
                    date: post.date,
                    category: post.category || 'tech',
                    desc: post.excerpt || '',
                    desc_en: post.excerpt_en || post.excerpt || '',
                    tags: post.tags || [],
                    tags_en: post.tags_en || post.tags || [],
                    url: post.url || '#',
                }))
                : fallbackArticles
            ).sort((a, b) => parseDate(b.date) - parseDate(a.date));

            // 分类标签映射（含新增分类）
            const categoryLabel = {
                zh: { all: '全部', tech: '技术', life: '生活', thoughts: '随想', idea: '思想', excerpt: '摘抄', paper: '论文' },
                en: { all: 'All', tech: 'Technology', life: 'Life', thoughts: 'Thoughts', idea: 'Ideas', excerpt: 'Excerpt', paper: 'Paper' },
            };

            const grid = document.getElementById('blog-grid');
            const filterBtns = document.querySelectorAll('.filter-tags .filter-btn');
            const searchInput = document.getElementById('search-input');

            const getLang = () => document.body.classList.contains('en') ? 'en' : 'zh';

            const syncUIByLang = () => {
                const lang = getLang();
                // 搜索占位
                if (searchInput) {
                    const enPh = searchInput.dataset.enPlaceholder || 'Search articles...';
                    const zhPh = searchInput.dataset.zhPlaceholder || '搜索文章...';
                    searchInput.placeholder = lang === 'en' ? enPh : zhPh;
                }
                // 过滤按钮文字
                filterBtns.forEach(btn => {
                    const en = btn.dataset.en;
                    const zh = btn.dataset.zh;
                    if (en && zh) btn.textContent = lang === 'en' ? en : zh;
                });
                // 头部文案
                document.querySelectorAll('[data-en][data-zh]').forEach(el => {
                    if (el.dataset.en && el.dataset.zh) {
                        el.textContent = lang === 'en' ? el.dataset.en : el.dataset.zh;
                    }
                });
            };

            const render = (list) => {
                if (!grid) return;
                grid.innerHTML = '';
                const lang = getLang();
                list.forEach(item => {
                    const catText = categoryLabel[lang]?.[item.category] || item.category;
                    const card = document.createElement('article');
                    card.className = 'group relative overflow-hidden border border-black dark:border-white bg-white dark:bg-darkCard p-6 flex flex-col gap-4 shadow-[8px_8px_0px_0px_rgba(0,0,0,0.12)] dark:shadow-[8px_8px_0px_0px_rgba(255,255,255,0.08)] transition-transform duration-300 hover:-translate-y-1';

                    card.innerHTML = `
                        <div class="flex items-start justify-between gap-3">
                            <div class="text-xs font-mono font-bold text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 px-2 py-1">${item.date}</div>
                            <div class="flex gap-2 items-center">
                                <span class="text-xs font-mono px-2 py-1 border border-black dark:border-white bg-yellow-200 dark:bg-yellow-800 dark:text-white">${catText}</span>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold leading-tight dark:text-white">
                            <a href="${item.url}" target="_blank" class="hover:underline">${lang === 'en' ? item.title_en : item.title}</a>
                        </h3>
                        <p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed">${lang === 'en' ? item.desc_en : item.desc}</p>
                        <div class="flex flex-wrap gap-2">
                            ${(lang === 'en' ? (item.tags_en || item.tags) : item.tags).map(t => `<span class="text-xs px-3 py-1 rounded-full border border-black/30 dark:border-white/40 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-200">${t}</span>`).join('')}
                        </div>
                        <div class="flex items-center gap-2 text-sm font-semibold text-blue-600 dark:text-blue-300">
                            <span>${lang === 'en' ? 'Read More' : '阅读更多'}</span>
                            <i data-lucide="arrow-right" class="w-4 h-4"></i>
                        </div>
                    `;
                    grid.appendChild(card);
                });
                lucide.createIcons();
            };

            const syncTailwindTheme = () => {
                const isDark = document.body.classList.contains('dark-mode');
                document.documentElement.classList.toggle('dark', isDark);
            };

            const applyFilter = () => {
                syncUIByLang();
                syncTailwindTheme();
                const activeBtn = document.querySelector('.filter-tags .filter-btn.active');
                const cat = activeBtn ? activeBtn.dataset.category : 'all';
                const term = (searchInput?.value || '').trim().toLowerCase();
                let list = articles;
                if (cat && cat !== 'all') list = list.filter(a => a.category === cat);
                if (term) {
                    list = list.filter(a =>
                        a.title.toLowerCase().includes(term) ||
                        a.title_en.toLowerCase().includes(term) ||
                        a.desc.toLowerCase().includes(term) ||
                        a.desc_en.toLowerCase().includes(term)
                    );
                }
                render(list);
            };

            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    applyFilter();
                });
            });

            if (searchInput) {
                searchInput.addEventListener('input', applyFilter);
            }

            // 语言切换时重新渲染
            const langToggle = document.getElementById('lang-toggle');
            if (langToggle) {
                langToggle.addEventListener('click', () => {
                    setTimeout(applyFilter, 50);
                });
            }

            // 主题切换时同步 Tailwind dark 类
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    setTimeout(() => {
                        syncTailwindTheme();
                        applyFilter();
                    }, 30);
                });
            }

            // 初始同步一次
            syncTailwindTheme();

            render(articles);
        });
    </script>
</body>
</html>