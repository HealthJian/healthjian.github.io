<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">æ™ºæ…§æ•™è‚² - HealthJiançš„åšå®¢</title>
    
    <!-- åŸºç¡€æ ·å¼ -->
    <link rel="stylesheet" href="../../../css/style.css">
    <link rel="stylesheet" href="../../../css/dark-mode.css">
    <link rel="stylesheet" href="../../../css/blog-post.css">
    
    <!-- Markdownä¸“ç”¨æ ·å¼ -->
    <link rel="stylesheet" href="../blogjs_markdown/markdown-styles.css">
    
    <!-- å¤–éƒ¨ä¾èµ– -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css" id="hljs-light">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css" id="hljs-dark" disabled>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Markdownè§£æåº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/2.1.3/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    
    <!-- å¤‡ç”¨CDN -->
    <script>
        // æ£€æŸ¥markedæ˜¯å¦åŠ è½½æˆåŠŸï¼Œå¦‚æœå¤±è´¥åˆ™åŠ è½½å¤‡ç”¨CDN
        if (typeof marked === 'undefined') {
            console.warn('ä¸»CDNåŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨CDN');
            document.write('<script src="https://unpkg.com/marked@2.1.3/marked.min.js"><\/script>');
        }
        
        // æ£€æŸ¥hljsæ˜¯å¦åŠ è½½æˆåŠŸ
        if (typeof hljs === 'undefined') {
            console.warn('highlight.jsä¸»CDNåŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨CDN');
            document.write('<script src="https://unpkg.com/@highlightjs/cdn-assets@11.7.0/highlight.min.js"><\/script>');
        }
    </script>
    
    <style>
        /* åŠ è½½åŠ¨ç”» */
        .loading-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            flex-direction: column;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            margin-top: 1rem;
            color: var(--text-color);
            font-size: 0.9rem;
        }
        
        /* é”™è¯¯æç¤ºæ ·å¼ */
        .error-container {
            background-color: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #f5c6cb;
            margin: 1rem 0;
        }
        
        body.dark-mode .error-container {
            background-color: #2d1b1f;
            color: #f8d7da;
            border-color: #4a2c35;
        }
        
        /* æ–‡ç« å…ƒä¿¡æ¯æ ·å¼ä¼˜åŒ– */
        .post-meta-info {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .post-meta-info .post-date,
        .post-meta-info .post-category {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .post-meta-info .post-tags .tag {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* å†…å®¹åŒºåŸŸæ ·å¼ */
        .markdown-container {
            min-height: 400px;
        }
    </style>
</head>
<body class="light-mode">
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="../../../index.html" class="logo">
                <img src="../../../images/githubherofigureimage.png" alt="Logo">
                <span class="site-name" data-en="HealthJian Blog" data-zh="HealthJian">HealthJian</span>
            </a>
        </div>
        <div class="nav-right">
            <ul class="menu">
                <li><a href="../../../index.html" data-en="Home" data-zh="é¦–é¡µ">é¦–é¡µ</a></li>
                <li><a href="../../blog.html" data-en="Blog" data-zh="åšå®¢">åšå®¢</a></li>
                <li><a href="https://github.com/CaiNiaojian" target="_blank" data-en="GitHub" data-zh="GitHub">GitHub</a></li>
                <li><a href="../../links.html" data-en="Links" data-zh="é“¾æ¥">é“¾æ¥</a></li>
                <li><a href="../../about.html" data-en="About" data-zh="å…³äº">å…³äº</a></li>
            </ul>
            <div class="social-icons">
                <a href="https://steamcommunity.com/id/yoursteamid" target="_blank" title="Steam"><i class="fab fa-steam"></i></a>
                <a href="mailto:gaojian1573@foxmail.com" title="Email"><i class="fas fa-envelope"></i></a>
            </div>
            <button id="theme-toggle" class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-moon"></i>
                <i class="fas fa-sun"></i>
            </button>
            <button id="lang-toggle" class="lang-toggle" title="åˆ‡æ¢è¯­è¨€">
                <span data-en="EN" data-zh="ä¸­">ä¸­</span>
            </button>
        </div>
    </nav>

    <div class="blog-post-container">
        <!-- ä¾§è¾¹æ  -->
        <aside class="blog-sidebar">
            <!-- ç›®å½•å®¹å™¨ -->
            <div class="toc-container">
                <h3 data-en="Table of Contents" data-zh="ç›®å½•">ç›®å½•</h3>
                <div id="toc-content">
                    <div class="loading-container">
                        <div class="loading-spinner"></div>
                        <div class="loading-text" data-en="Loading..." data-zh="åŠ è½½ä¸­...">åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
            
            <!-- æ–‡ç« å…ƒä¿¡æ¯ -->
            <div class="post-meta-info">
                <div class="post-date">
                    <i class="far fa-calendar-alt"></i>
                    <span id="post-date">åŠ è½½ä¸­...</span>
                </div>
                <div class="post-tags">
                    <i class="fas fa-tags"></i>
                    <div id="post-tags">
                        <span class="tag" data-en="Graduate Exam" data-zh="è€ƒç ”">è€ƒç ”</span>
                        <span class="tag" data-en="Persistence" data-zh="åšæŒ">åšæŒ</span>
                        <span class="tag" data-en="Motivation" data-zh="åŠ±å¿—">åŠ±å¿—</span>
                        <span class="tag" data-en="Life" data-zh="ç”Ÿæ´»">ç”Ÿæ´»</span>
                    </div>
                </div>
                <div class="post-category">
                    <i class="fas fa-folder"></i>
                    <span id="post-category" data-en="Life" data-zh="ç”Ÿæ´»">ç”Ÿæ´»</span>
                </div>
            </div>
            
            <!-- å¯¼èˆªæŒ‰é’® -->
            <div class="post-navigation">
                <h3 data-en="Navigation" data-zh="å¯¼èˆª">å¯¼èˆª</h3>
                <div class="nav-buttons">
                    <a href="../../blog.html" class="nav-button" data-en="Back to Blog" data-zh="è¿”å›åšå®¢åˆ—è¡¨">
                        <i class="fas fa-arrow-left"></i>
                        <span data-en="Back to Blog" data-zh="è¿”å›åšå®¢åˆ—è¡¨">è¿”å›åšå®¢åˆ—è¡¨</span>
                    </a>
                </div>
            </div>
            
            <!-- æ–‡ç« æ“ä½œ -->
            <div class="post-actions">
                <h3 data-en="Actions" data-zh="æ“ä½œ">æ“ä½œ</h3>
                <div class="action-buttons">
                    <button id="print-btn" class="action-btn" title="æ‰“å°æ–‡ç« ">
                        <i class="fas fa-print"></i>
                        <span data-en="Print" data-zh="æ‰“å°">æ‰“å°</span>
                    </button>
                    <button id="share-btn" class="action-btn" title="åˆ†äº«æ–‡ç« ">
                        <i class="fas fa-share-alt"></i>
                        <span data-en="Share" data-zh="åˆ†äº«">åˆ†äº«</span>
                    </button>
                    <button id="fullscreen-btn" class="action-btn" title="å…¨å±é˜…è¯»">
                        <i class="fas fa-expand"></i>
                        <span data-en="Fullscreen" data-zh="å…¨å±">å…¨å±</span>
                    </button>
                </div>
            </div>
        </aside>

        <!-- æ–‡ç« ä¸»ä½“ -->
        <main class="blog-post-main">
            <article class="blog-post-content">
                <header class="post-header">
                    <h1 class="post-title" id="article-title">
                        <div class="bilingual-content">
                            <span class="zh-content">åŠ è½½ä¸­...</span>
                            <span class="en-content" style="display: none;">Loading...</span>
                        </div>
                    </h1>
                </header>
                
                <!-- Markdownå†…å®¹å®¹å™¨ -->
                <div class="post-body markdown-container">
                    <div id="markdown-content" class="markdown-content">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <div class="loading-text" data-en="Loading article content..." data-zh="æ­£åœ¨åŠ è½½æ–‡ç« å†…å®¹...">æ­£åœ¨åŠ è½½æ–‡ç« å†…å®¹...</div>
                        </div>
                    </div>
                </div>
            </article>
            
            <!-- è¯„è®ºåŒº -->
            <div class="comments-section">
                <h3 data-en="Comments" data-zh="è¯„è®º">è¯„è®º</h3>
                <div class="comment-form">
                    <textarea placeholder="å†™ä¸‹ä½ çš„æƒ³æ³•..." data-en-placeholder="Write your thoughts..." data-zh-placeholder="å†™ä¸‹ä½ çš„æƒ³æ³•..."></textarea>
                    <button data-en="Submit" data-zh="æäº¤">æäº¤</button>
                </div>
                <div class="comments-container">
                    <p class="no-comments" data-en="Be the first to comment!" data-zh="æˆä¸ºç¬¬ä¸€ä¸ªè¯„è®ºçš„äººï¼">æˆä¸ºç¬¬ä¸€ä¸ªè¯„è®ºçš„äººï¼ <span class="emoji">ğŸ‰</span></p>
                </div>
            </div>
        </main>
    </div>

    <!-- é¡µè„š -->
    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <p>&copy; 2025 CaiNiaojian&HealthJian all followed.</p>
                <p data-en="Contact: gaojian1573@foxmail.com" data-zh="è”ç³»æ–¹å¼ï¼šgaojian1573@foxmail.com">è”ç³»æ–¹å¼ï¼šgaojian1573@foxmail.com<a href="mailto:gaojian1573@foxmail.com">gaojian1573@foxmail.com</a></p>
                <p data-en="Location: JiangSu, China" data-zh="åœ°å€ï¼šä¸­å›½ï¼Œæ±Ÿè‹">åœ°å€ï¼šä¸­å›½ï¼Œæ±Ÿè‹</p>
            </div>
            <div class="footer-links">
                <a href="../../blog.html" data-en="Blog" data-zh="åšå®¢">åšå®¢</a>
                <a href="../../about.html" data-en="About" data-zh="å…³äº">å…³äº</a>
                <a href="https://github.com/CaiNiaojian" target="_blank" data-en="GitHub" data-zh="GitHub">GitHub</a>
                <a href="../../changelog.html" data-en="ChangeLog" data-zh="æ›´æ–°æ—¥å¿—">æ›´æ–°æ—¥å¿—</a>
            </div>
        </div>
    </footer>

    <!-- æ ¸å¿ƒè„šæœ¬ -->
    <script src="../../../js/main.js"></script>
    <script src="../../../js/theme.js"></script>
    <script src="../../../js/language.js"></script>
    <script src="../../../js/blog-post.js"></script>
    
    <!-- Markdownæ¸²æŸ“å™¨ -->
    <script src="../blogjs_markdown/markdown-renderer.js"></script>
    
    <!-- é¡µé¢ä¸»è„šæœ¬ -->
    <script>
        // é¡µé¢é…ç½®
        const PAGE_CONFIG = {
            // é»˜è®¤Markdownæ–‡ä»¶è·¯å¾„ï¼ˆå¯ä»¥é€šè¿‡URLå‚æ•°è¦†ç›–ï¼‰
            defaultMarkdownFile: '../../../context/Smarteducation.md',
            // æ–‡ç« å…ƒæ•°æ®
            articleMeta: {
                title: 'å¤§æ•°æ®ä½œä¸ºæ™ºæ…§æ•™è‚²çš„å‚¬åŒ–å‰‚ï¼šæ•°æ®é©±åŠ¨æ–¹æ³•ã€åº”ç”¨ä¸æŒ‘æˆ˜çš„ç»¼åˆè¿°è¯„',
                title_en: 'Big data as a catalyst for smart education: A comprehensive review of data-driven approaches, applications, and challenges',
                date: '2025-09-11',
                category: 'æŠ€æœ¯',
                category_en: 'Technology',
                tags: ['æ™ºæ…§æ•™è‚²', 'å¤§æ•°æ®', 'æ•°æ®æŒ–æ˜', 'æ•°æ®åˆ†æ'],
                tags_en: ['Smart Education', 'Big Data', 'Data Mining', 'Data Analysis']
            }
        };

        // å…¨å±€å˜é‡
        let markdownRenderer;
        let currentMarkdownFile;
        let isFullscreen = false;

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            // åˆå§‹åŒ–Markdownæ¸²æŸ“å™¨
            markdownRenderer = new MarkdownRenderer();
            
            // è·å–Markdownæ–‡ä»¶è·¯å¾„
            currentMarkdownFile = getMarkdownFileFromURL() || PAGE_CONFIG.defaultMarkdownFile;
            
            // åŠ è½½å¹¶æ¸²æŸ“Markdownæ–‡ä»¶
            await loadAndRenderMarkdown();
            
            // åˆå§‹åŒ–é¡µé¢åŠŸèƒ½
            initPageFeatures();
            
            // åˆå§‹åŒ–ä¸»é¢˜åˆ‡æ¢ç›‘å¬
            initThemeToggle();
        });

        // ä»URLå‚æ•°è·å–Markdownæ–‡ä»¶è·¯å¾„
        function getMarkdownFileFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('md') || urlParams.get('file');
        }

        // åŠ è½½å¹¶æ¸²æŸ“Markdownæ–‡ä»¶
        async function loadAndRenderMarkdown() {
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                showLoadingState();
                
                // åŠ è½½Markdownæ–‡ä»¶
                const markdownText = await markdownRenderer.loadMarkdownFile(currentMarkdownFile);
                
                // æ¸²æŸ“Markdownå†…å®¹
                const result = await markdownRenderer.renderMarkdown(
                    markdownText, 
                    document.getElementById('markdown-content')
                );
                
                // æ›´æ–°ç›®å½•
                updateTableOfContents(result.toc);
                
                // æ›´æ–°é¡µé¢æ ‡é¢˜å’Œå…ƒæ•°æ®
                updatePageMetadata(markdownText);
                
                // éšè—åŠ è½½çŠ¶æ€
                hideLoadingState();
                
                console.log('Markdownæ–‡ç« åŠ è½½å®Œæˆ');
                
            } catch (error) {
                console.error('åŠ è½½Markdownæ–‡ä»¶å¤±è´¥:', error);
                showErrorState(error.message);
            }
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoadingState() {
            const content = document.getElementById('markdown-content');
            const toc = document.getElementById('toc-content');
            
            content.innerHTML = `
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <div class="loading-text" data-en="Loading article content..." data-zh="æ­£åœ¨åŠ è½½æ–‡ç« å†…å®¹...">æ­£åœ¨åŠ è½½æ–‡ç« å†…å®¹...</div>
                </div>
            `;
            
            toc.innerHTML = `
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <div class="loading-text" data-en="Loading..." data-zh="åŠ è½½ä¸­...">åŠ è½½ä¸­...</div>
                </div>
            `;
        }

        // éšè—åŠ è½½çŠ¶æ€
        function hideLoadingState() {
            // åŠ è½½çŠ¶æ€ä¼šè¢«å®é™…å†…å®¹æ›¿æ¢ï¼Œæ— éœ€ç‰¹æ®Šå¤„ç†
        }

        // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
        function showErrorState(errorMessage) {
            const content = document.getElementById('markdown-content');
            const currentLang = document.body.classList.contains('en') ? 'en' : 'zh';
            
            const errorText = currentLang === 'en' 
                ? `Failed to load article: ${errorMessage}` 
                : `åŠ è½½æ–‡ç« å¤±è´¥ï¼š${errorMessage}`;
            
            content.innerHTML = `
                <div class="error-container">
                    <h3><i class="fas fa-exclamation-triangle"></i> ${currentLang === 'en' ? 'Error' : 'é”™è¯¯'}</h3>
                    <p>${errorText}</p>
                    <p>${currentLang === 'en' ? 'Please check the file path or try again later.' : 'è¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„æˆ–ç¨åé‡è¯•ã€‚'}</p>
                </div>
            `;
            
            // æ›´æ–°ç›®å½•ä¸ºé”™è¯¯çŠ¶æ€
            const toc = document.getElementById('toc-content');
            toc.innerHTML = `<p class="no-toc">${currentLang === 'en' ? 'Unable to load table of contents' : 'æ— æ³•åŠ è½½ç›®å½•'}</p>`;
        }

        // æ›´æ–°ç›®å½•
        function updateTableOfContents(tocItems) {
            const tocContent = document.getElementById('toc-content');
            
            if (!tocItems || tocItems.length === 0) {
                const currentLang = document.body.classList.contains('en') ? 'en' : 'zh';
                tocContent.innerHTML = `<p class="no-toc">${currentLang === 'en' ? 'No table of contents available' : 'æœ¬æ–‡æš‚æ— ç›®å½•'}</p>`;
                return;
            }
            
            tocContent.innerHTML = markdownRenderer.generateTOCHTML();
            
            // æ·»åŠ ç›®å½•é“¾æ¥ç‚¹å‡»äº‹ä»¶
            const tocLinks = tocContent.querySelectorAll('.toc-link');
            tocLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // æ›´æ–°æ´»åŠ¨çŠ¶æ€
                        tocLinks.forEach(l => l.classList.remove('active'));
                        this.classList.add('active');
                        
                        // æ›´æ–°URL
                        history.pushState(null, null, this.getAttribute('href'));
                    }
                });
            });
        }

        // æ›´æ–°é¡µé¢å…ƒæ•°æ®
        function updatePageMetadata(markdownText) {
            // å°è¯•ä»Markdownå†…å®¹ä¸­æå–æ ‡é¢˜
            const titleMatch = markdownText.match(/^#\s+(.+)$/m);
            const extractedTitle = titleMatch ? titleMatch[1] : null;
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            const pageTitle = extractedTitle || PAGE_CONFIG.articleMeta.title;
            const pageTitleEn = extractedTitle || PAGE_CONFIG.articleMeta.title_en;
            
            document.getElementById('page-title').textContent = `${pageTitle} - HealthJiançš„åšå®¢`;
            
            const articleTitle = document.getElementById('article-title');
            const zhContent = articleTitle.querySelector('.zh-content');
            const enContent = articleTitle.querySelector('.en-content');
            
            if (zhContent) zhContent.textContent = pageTitle;
            if (enContent) enContent.textContent = pageTitleEn;
            
            // æ›´æ–°æ—¥æœŸ
            document.getElementById('post-date').textContent = PAGE_CONFIG.articleMeta.date;
            
            // æ›´æ–°åˆ†ç±»
            const categoryElement = document.getElementById('post-category');
            categoryElement.setAttribute('data-zh', PAGE_CONFIG.articleMeta.category);
            categoryElement.setAttribute('data-en', PAGE_CONFIG.articleMeta.category_en);
            categoryElement.textContent = PAGE_CONFIG.articleMeta.category;
            
            // æ›´æ–°æ ‡ç­¾
            const tagsContainer = document.getElementById('post-tags');
            const currentLang = document.body.classList.contains('en') ? 'en' : 'zh';
            const tags = currentLang === 'en' ? PAGE_CONFIG.articleMeta.tags_en : PAGE_CONFIG.articleMeta.tags;
            
            tagsContainer.innerHTML = '';
            tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag';
                tagElement.textContent = tag;
                tagsContainer.appendChild(tagElement);
            });
        }

        // åˆå§‹åŒ–é¡µé¢åŠŸèƒ½
        function initPageFeatures() {
            // æ‰“å°åŠŸèƒ½
            document.getElementById('print-btn').addEventListener('click', function() {
                window.print();
            });
            
            // åˆ†äº«åŠŸèƒ½
            document.getElementById('share-btn').addEventListener('click', function() {
                if (navigator.share) {
                    navigator.share({
                        title: document.title,
                        url: window.location.href
                    });
                } else {
                    // é™çº§å¤„ç†ï¼šå¤åˆ¶é“¾æ¥
                    navigator.clipboard.writeText(window.location.href).then(() => {
                        const currentLang = document.body.classList.contains('en') ? 'en' : 'zh';
                        const message = currentLang === 'en' ? 'Link copied to clipboard!' : 'é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
                        alert(message);
                    });
                }
            });
            
            // å…¨å±åŠŸèƒ½
            document.getElementById('fullscreen-btn').addEventListener('click', function() {
                toggleFullscreen();
            });
            
            // æ»šåŠ¨ç›‘å¬ï¼Œæ›´æ–°æ´»åŠ¨ç›®å½•é¡¹
            let ticking = false;
            window.addEventListener('scroll', function() {
                if (!ticking) {
                    requestAnimationFrame(updateActiveTocItem);
                    ticking = true;
                }
            });
        }

        // åˆ‡æ¢å…¨å±æ¨¡å¼
        function toggleFullscreen() {
            const button = document.getElementById('fullscreen-btn');
            const icon = button.querySelector('i');
            
            if (!isFullscreen) {
                // è¿›å…¥å…¨å±
                document.documentElement.requestFullscreen();
                icon.className = 'fas fa-compress';
                isFullscreen = true;
            } else {
                // é€€å‡ºå…¨å±
                document.exitFullscreen();
                icon.className = 'fas fa-expand';
                isFullscreen = false;
            }
        }

        // æ›´æ–°æ´»åŠ¨çš„ç›®å½•é¡¹
        function updateActiveTocItem() {
            const headings = document.querySelectorAll('.markdown-content h1, .markdown-content h2, .markdown-content h3, .markdown-content h4, .markdown-content h5, .markdown-content h6');
            const tocLinks = document.querySelectorAll('.toc-link');
            
            let activeHeading = null;
            const scrollTop = window.pageYOffset;
            
            // æ‰¾åˆ°å½“å‰å¯è§çš„æ ‡é¢˜
            headings.forEach(heading => {
                const rect = heading.getBoundingClientRect();
                if (rect.top <= 100) {
                    activeHeading = heading;
                }
            });
            
            // æ›´æ–°ç›®å½•æ´»åŠ¨çŠ¶æ€
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (activeHeading && link.getAttribute('href') === `#${activeHeading.id}`) {
                    link.classList.add('active');
                }
            });
            
            ticking = false;
        }

        // åˆå§‹åŒ–ä¸»é¢˜åˆ‡æ¢ç›‘å¬
        function initThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    // å»¶è¿Ÿæ‰§è¡Œä»¥ç¡®ä¿ä¸»é¢˜å·²åˆ‡æ¢
                    setTimeout(() => {
                        updateHighlightTheme();
                    }, 100);
                });
            }
            
            // åˆå§‹åŒ–æ—¶è®¾ç½®æ­£ç¡®çš„é«˜äº®ä¸»é¢˜
            updateHighlightTheme();
        }

        // æ›´æ–°ä»£ç é«˜äº®ä¸»é¢˜
        function updateHighlightTheme() {
            const lightTheme = document.getElementById('hljs-light');
            const darkTheme = document.getElementById('hljs-dark');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            if (lightTheme && darkTheme) {
                lightTheme.disabled = isDarkMode;
                darkTheme.disabled = !isDarkMode;
            }
        }

        // ç›‘å¬å…¨å±å˜åŒ–
        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement) {
                const button = document.getElementById('fullscreen-btn');
                const icon = button.querySelector('i');
                icon.className = 'fas fa-expand';
                isFullscreen = false;
            }
        });
    </script>
</body>
</html>
